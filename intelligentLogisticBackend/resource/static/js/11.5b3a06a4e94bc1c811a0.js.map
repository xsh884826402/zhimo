{"version":3,"sources":["webpack:///src/page/orderList.vue","webpack:///./src/page/orderList.vue?3891","webpack:///./src/page/orderList.vue"],"names":["orderList","data","tableData","currentRow","offset","limit","count","currentPage","restaurant_id","expendRow","components","headTop","created","this","$route","query","initData","mounted","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","countData","wrap","_context","prev","next","Object","getData","sent","status","Error","getOrders","t0","console","log","stop","handleSizeChange","val","handleCurrentChange","_this2","_callee2","Orders","_context2","forEach","item","index","id","total_amount","status_bar","title","user_id","address_id","push","expand","row","_this3","_callee3","restaurant","userInfo","addressInfo","_context3","splice","extends_default","restaurant_name","name","restaurant_address","address","user_name","username","$nextTick","indexOf","page_orderList","render","_vm","_h","$createElement","_c","_self","staticClass","_v","staticStyle","width","attrs","expand-row-keys","row-key","on","type","scopedSlots","_u","key","fn","props","label-position","inline","label","_s","prop","text-align","margin-top","current-page","page-size","layout","total","size-change","current-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.5b3a06a4e94bc1c811a0.js","sourcesContent":["<template>\r\n    <div class=\"fillcontain\">\r\n        <head-top></head-top>\r\n        <div class=\"table_container\">\r\n            <el-table\r\n\t\t\t    :data=\"tableData\"\r\n\t\t\t    @expand='expand'\r\n                :expand-row-keys='expendRow'\r\n                :row-key=\"row => row.index\"\r\n\t\t\t    style=\"width: 100%\">\r\n\t\t\t    <el-table-column type=\"expand\">\r\n\t\t\t      <template slot-scope=\"props\">\r\n\t\t\t        <el-form label-position=\"left\" inline class=\"demo-table-expand\">\r\n\t\t\t          <el-form-item label=\"用户名\" >\r\n\t\t\t            <span>{{ props.row.user_name }}</span>\r\n\t\t\t          </el-form-item>\r\n\t\t\t          <el-form-item label=\"店铺名称\">\r\n\t\t\t            <span>{{ props.row.restaurant_name }}</span>\r\n\t\t\t          </el-form-item>\r\n\t\t\t          <el-form-item label=\"收货地址\">\r\n\t\t\t            <span>{{ props.row.address }}</span>\r\n\t\t\t          </el-form-item>\r\n\t\t\t          <el-form-item label=\"店铺 ID\">\r\n\t\t\t            <span>{{ props.row.restaurant_id }}</span>\r\n\t\t\t          </el-form-item>\r\n\t\t\t          <el-form-item label=\"店铺地址\">\r\n\t\t\t            <span>{{ props.row.restaurant_address }}</span>\r\n\t\t\t          </el-form-item>\r\n\t\t\t        </el-form>\r\n\t\t\t      </template>\r\n\t\t\t    </el-table-column>\r\n\t\t\t    <el-table-column\r\n\t\t\t      label=\"订单 ID\"\r\n\t\t\t      prop=\"id\">\r\n\t\t\t    </el-table-column>\r\n\t\t\t    <el-table-column\r\n\t\t\t      label=\"总价格\"\r\n\t\t\t      prop=\"total_amount\">\r\n\t\t\t    </el-table-column>\r\n\t\t\t    <el-table-column\r\n\t\t\t      label=\"订单状态\"\r\n\t\t\t      prop=\"status\">\r\n\t\t\t    </el-table-column>\r\n\t\t\t</el-table>\r\n            <div class=\"Pagination\" style=\"text-align: left;margin-top: 10px;\">\r\n                <el-pagination\r\n                  @size-change=\"handleSizeChange\"\r\n                  @current-change=\"handleCurrentChange\"\r\n                  :current-page=\"currentPage\"\r\n                  :page-size=\"20\"\r\n                  layout=\"total, prev, pager, next\"\r\n                  :total=\"count\">\r\n                </el-pagination>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import headTop from '../components/headTop'\r\n    import {getOrderList, getOrderCount, getResturantDetail, getUserInfo, getAddressById} from '@/api/getData'\r\n    export default {\r\n        data(){\r\n            return {\r\n                tableData: [],\r\n                currentRow: null,\r\n                offset: 0,\r\n                limit: 20,\r\n                count: 0,\r\n                currentPage: 1,\r\n                restaurant_id: null,\r\n                expendRow: [],\r\n            }\r\n        },\r\n    \tcomponents: {\r\n    \t\theadTop,\r\n    \t},\r\n        created(){\r\n        \tthis.restaurant_id = this.$route.query.restaurant_id;\r\n            this.initData();\r\n        },\r\n        mounted(){\r\n\r\n        },\r\n        methods: {\r\n            async initData(){\r\n                try{\r\n                    const countData = await getOrderCount({restaurant_id: this.restaurant_id});\r\n                    if (countData.status == 1) {\r\n                        this.count = countData.count;\r\n                    }else{\r\n                        throw new Error('获取数据失败');\r\n                    }\r\n                    this.getOrders();\r\n                }catch(err){\r\n                    console.log('获取数据失败', err);\r\n                }\r\n            },\r\n            handleSizeChange(val) {\r\n                console.log(`每页 ${val} 条`);\r\n            },\r\n            handleCurrentChange(val) {\r\n                this.currentPage = val;\r\n                this.offset = (val - 1)*this.limit;\r\n                this.getOrders()\r\n            },\r\n            async getOrders(){\r\n                const Orders = await getOrderList({offset: this.offset, limit: this.limit, restaurant_id: this.restaurant_id});\r\n                this.tableData = [];\r\n                Orders.forEach((item, index) => {\r\n                    const tableData = {};\r\n                    tableData.id = item.id;\r\n                    tableData.total_amount = item.total_amount;\r\n                    tableData.status = item.status_bar.title;\r\n                    tableData.user_id = item.user_id;\r\n \t\t\t\t\ttableData.restaurant_id = item.restaurant_id;\r\n \t\t\t\t\ttableData.address_id = item.address_id;\r\n                    tableData.index = index;\r\n                    this.tableData.push(tableData);\r\n                })\r\n            },\r\n            async expand(row, status){\r\n            \tif (status) {\r\n            \t\tconst restaurant = await getResturantDetail(row.restaurant_id);\r\n\t            \tconst userInfo = await getUserInfo(row.user_id);\r\n\t            \tconst addressInfo = await getAddressById(row.address_id);\r\n\r\n\t                this.tableData.splice(row.index, 1, {...row, ...{restaurant_name: restaurant.name, restaurant_address: restaurant.address, address: addressInfo.address, user_name: userInfo.username}});\r\n                    this.$nextTick(() => {\r\n                        this.expendRow.push(row.index);\r\n                    })\r\n\t            }else{\r\n                    const index = this.expendRow.indexOf(row.index);\r\n                    this.expendRow.splice(index, 1)\r\n                }\r\n            },\r\n        },\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\t@import '../style/mixin';\r\n    .table_container{\r\n        padding: 20px;\r\n    }\r\n    .demo-table-expand {\r\n\t    font-size: 0;\r\n\t}\r\n\t.demo-table-expand label {\r\n\t    width: 90px;\r\n\t    color: #99a9bf;\r\n\t}\r\n\t.demo-table-expand .el-form-item {\r\n\t    margin-right: 0;\r\n\t    margin-bottom: 0;\r\n\t    width: 50%;\r\n\t}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/page/orderList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fillcontain\"},[_c('head-top'),_vm._v(\" \"),_c('div',{staticClass:\"table_container\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"expand-row-keys\":_vm.expendRow,\"row-key\":function (row) { return row.index; }},on:{\"expand\":_vm.expand}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('el-form',{staticClass:\"demo-table-expand\",attrs:{\"label-position\":\"left\",\"inline\":\"\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('span',[_vm._v(_vm._s(props.row.user_name))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"店铺名称\"}},[_c('span',[_vm._v(_vm._s(props.row.restaurant_name))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"收货地址\"}},[_c('span',[_vm._v(_vm._s(props.row.address))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"店铺 ID\"}},[_c('span',[_vm._v(_vm._s(props.row.restaurant_id))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"店铺地址\"}},[_c('span',[_vm._v(_vm._s(props.row.restaurant_address))])])],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"订单 ID\",\"prop\":\"id\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"总价格\",\"prop\":\"total_amount\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"订单状态\",\"prop\":\"status\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"Pagination\",staticStyle:{\"text-align\":\"left\",\"margin-top\":\"10px\"}},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":20,\"layout\":\"total, prev, pager, next\",\"total\":_vm.count},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-54f5cac5\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/orderList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-54f5cac5\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./orderList.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./orderList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./orderList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-54f5cac5\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./orderList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/orderList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}