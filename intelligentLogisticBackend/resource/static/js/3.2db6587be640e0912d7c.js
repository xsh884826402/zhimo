webpackJsonp([3],{"/vN/":function(e,t,a){var n=a("Icdr"),i=a("Rfu2"),r=a("/gxq"),o=a("vXqC"),s=a("wWR3").getPercentWithPrecision,l=a("/n1K"),c=a("kQD9"),h=n.extendSeriesModel({type:"series.pie",init:function(e){h.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()},this.updateSelectedMap(e.data),this._defaultLabelLine(e)},mergeOption:function(e){h.superCall(this,"mergeOption",e),this.updateSelectedMap(this.option.data)},getInitialData:function(e,t){var a=l(["value"],e.data),n=new i(a,this);return n.initData(e.data),n},getDataParams:function(e){var t=this.getData(),a=h.superCall(this,"getDataParams",e),n=[];return t.each("value",function(e){n.push(e)}),a.percent=s(n,e,t.hostModel.get("percentPrecision")),a.$vars.push("percent"),a},_defaultLabelLine:function(e){o.defaultEmphasis(e.labelLine,["show"]);var t=e.labelLine.normal,a=e.labelLine.emphasis;t.show=t.show&&e.label.normal.show,a.show=a.show&&e.label.emphasis.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,label:{normal:{rotate:!1,show:!0,position:"outer"},emphasis:{}},labelLine:{normal:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}}},itemStyle:{normal:{borderWidth:1},emphasis:{}},animationType:"expansion",animationEasing:"cubicOut",data:[]}});r.mixin(h,c);var u=h;e.exports=u},"1A4n":function(e,t,a){var n=a("/gxq"),i=a("0sHC"),r=a("Ylhr");function o(e,t,a,n){var i=t.getData(),r=this.dataIndex,o=i.getName(r),l=t.get("selectedOffset");n.dispatchAction({type:"pieToggleSelect",from:e,name:o,seriesId:t.id}),i.each(function(e){s(i.getItemGraphicEl(e),i.getItemLayout(e),t.isSelected(i.getName(e)),l,a)})}function s(e,t,a,n,i){var r=(t.startAngle+t.endAngle)/2,o=Math.cos(r),s=Math.sin(r),l=a?n:0,c=[o*l,s*l];i?e.animate().when(200,{position:c}).start("bounceOut"):e.attr("position",c)}function l(e,t){i.Group.call(this);var a=new i.Sector({z2:2}),n=new i.Polyline,r=new i.Text;function o(){n.ignore=n.hoverIgnore,r.ignore=r.hoverIgnore}function s(){n.ignore=n.normalIgnore,r.ignore=r.normalIgnore}this.add(a),this.add(n),this.add(r),this.updateData(e,t,!0),this.on("emphasis",o).on("normal",s).on("mouseover",o).on("mouseout",s)}var c=l.prototype;c.updateData=function(e,t,a){var r=this.childAt(0),o=e.hostModel,l=e.getItemModel(t),c=e.getItemLayout(t),h=n.extend({},c);(h.label=null,a)?(r.setShape(h),"scale"===o.getShallow("animationType")?(r.shape.r=c.r0,i.initProps(r,{shape:{r:c.r}},o,t)):(r.shape.endAngle=c.startAngle,i.updateProps(r,{shape:{endAngle:c.endAngle}},o,t))):i.updateProps(r,{shape:h},o,t);var u=l.getModel("itemStyle"),g=e.getItemVisual(t,"color");r.useStyle(n.defaults({lineJoin:"bevel",fill:g},u.getModel("normal").getItemStyle())),r.hoverStyle=u.getModel("emphasis").getItemStyle();var p=l.getShallow("cursor");function d(){r.stopAnimation(!0),r.animateTo({shape:{r:c.r+o.get("hoverOffset")}},300,"elasticOut")}function f(){r.stopAnimation(!0),r.animateTo({shape:{r:c.r}},300,"elasticOut")}p&&r.attr("cursor",p),s(this,e.getItemLayout(t),l.get("selected"),o.get("selectedOffset"),o.get("animation")),r.off("mouseover").off("mouseout").off("emphasis").off("normal"),l.get("hoverAnimation")&&o.isAnimationEnabled()&&r.on("mouseover",d).on("mouseout",f).on("emphasis",d).on("normal",f),this._updateLabel(e,t),i.setHoverStyle(this)},c._updateLabel=function(e,t){var a=this.childAt(1),n=this.childAt(2),r=e.hostModel,o=e.getItemModel(t),s=e.getItemLayout(t).label,l=e.getItemVisual(t,"color");i.updateProps(a,{shape:{points:s.linePoints||[[s.x,s.y],[s.x,s.y],[s.x,s.y]]}},r,t),i.updateProps(n,{style:{x:s.x,y:s.y}},r,t),n.attr({rotation:s.rotation,origin:[s.x,s.y],z2:10});var c=o.getModel("label.normal"),h=o.getModel("label.emphasis"),u=o.getModel("labelLine.normal"),g=o.getModel("labelLine.emphasis");l=e.getItemVisual(t,"color");i.setLabelStyle(n.style,n.hoverStyle={},c,h,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:e.getName(t),autoColor:l,useInsideStyle:!!s.inside},{textAlign:s.textAlign,textVerticalAlign:s.verticalAlign,opacity:e.getItemVisual(t,"opacity")}),n.ignore=n.normalIgnore=!c.get("show"),n.hoverIgnore=!h.get("show"),a.ignore=a.normalIgnore=!u.get("show"),a.hoverIgnore=!g.get("show"),a.setStyle({stroke:l,opacity:e.getItemVisual(t,"opacity")}),a.setStyle(u.getModel("lineStyle").getLineStyle()),a.hoverStyle=g.getModel("lineStyle").getLineStyle();var p=u.get("smooth");p&&!0===p&&(p=.4),a.setShape({smooth:p})},n.inherits(l,i.Group);var h=r.extend({type:"pie",init:function(){var e=new i.Group;this._sectorGroup=e},render:function(e,t,a,i){if(!i||i.from!==this.uid){var r=e.getData(),s=this._data,c=this.group,h=t.get("animation"),u=!s,g=e.get("animationType"),p=n.curry(o,this.uid,e,h,a),d=e.get("selectedMode");if(r.diff(s).add(function(e){var t=new l(r,e);u&&"scale"!==g&&t.eachChild(function(e){e.stopAnimation(!0)}),d&&t.on("click",p),r.setItemGraphicEl(e,t),c.add(t)}).update(function(e,t){var a=s.getItemGraphicEl(t);a.updateData(r,e),a.off("click"),d&&a.on("click",p),c.add(a),r.setItemGraphicEl(e,a)}).remove(function(e){var t=s.getItemGraphicEl(e);c.remove(t)}).execute(),h&&u&&r.count()>0&&"scale"!==g){var f=r.getItemLayout(0),m=Math.max(a.getWidth(),a.getHeight())/2,v=n.bind(c.removeClipPath,c);c.setClipPath(this._createClipPath(f.cx,f.cy,m,f.startAngle,f.clockwise,v,e))}this._data=r}},dispose:function(){},_createClipPath:function(e,t,a,n,r,o,s){var l=new i.Sector({shape:{cx:e,cy:t,r0:0,r:a,startAngle:n,endAngle:n,clockwise:r}});return i.initProps(l,{shape:{endAngle:n+(r?1:-1)*Math.PI*2}},s,o),l},containPoint:function(e,t){var a=t.getData().getItemLayout(0);if(a){var n=e[0]-a.cx,i=e[1]-a.cy,r=Math.sqrt(n*n+i*i);return r<=a.r&&r>=a.r0}}});e.exports=h},"3iqo":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),i=a.n(n),r=a("exGp"),o=a.n(r),s=a("bBUo"),l=a("Icdr"),c=a.n(l),h=(a("Vb+l"),a("miEh"),a("80cc"),{mounted:function(){this.myChart=c.a.init(document.getElementById("visitorpie")),this.initData()},props:["pieData"],methods:{initData:function(){var e={title:{text:"用户分布",subtext:"",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["北京","上海","深圳","杭州","其他"]},series:[{name:"访问来源",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:this.pieData.beijing,name:"北京"},{value:this.pieData.shanghai,name:"上海"},{value:this.pieData.shenzhen,name:"深圳"},{value:this.pieData.hangzhou,name:"杭州"},{value:this.pieData.qita,name:"其他"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};this.myChart.setOption(e)}},watch:{pieData:function(){this.initData()}}}),u={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"visitorpie"},[t("div",{staticStyle:{width:"90%",height:"450px"},attrs:{id:"visitorpie"}})])}]};var g=a("VU/8")(h,u,!1,function(e){a("8mEr")},null,null).exports,p=a("1h8J"),d={data:function(){return{pieData:{}}},components:{headTop:s.a,visitorPie:g},mounted:function(){this.initData()},methods:{initData:function(){var e=this;return o()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(p.w)();case 3:if(1!=(a=t.sent).status){t.next=8;break}e.pieData=a.user_city,t.next=9;break;case 8:throw new Error(a);case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log("获取用户分布信息失败",t.t0);case 14:case"end":return t.stop()}},t,e,[[0,11]])}))()}}},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("head-top"),this._v(" "),t("visitor-pie",{attrs:{pieData:this.pieData}})],1)},staticRenderFns:[]};var m=a("VU/8")(d,f,!1,function(e){a("v9AW")},null,null);t.default=m.exports},"8mEr":function(e,t){},"9Z3y":function(e,t,a){var n=a("wWR3"),i=n.parsePercent,r=n.linearMap,o=a("XhgW"),s=a("/gxq"),l=2*Math.PI,c=Math.PI/180;e.exports=function(e,t,a,n){t.eachSeriesByType(e,function(e){var t=e.get("center"),n=e.get("radius");s.isArray(n)||(n=[0,n]),s.isArray(t)||(t=[t,t]);var h=a.getWidth(),u=a.getHeight(),g=Math.min(h,u),p=i(t[0],h),d=i(t[1],u),f=i(n[0],g/2),m=i(n[1],g/2),v=e.getData(),y=-e.get("startAngle")*c,x=e.get("minAngle")*c,I=0;v.each("value",function(e){!isNaN(e)&&I++});var S=v.getSum("value"),b=Math.PI/(S||I)*2,w=e.get("clockwise"),A=e.get("roseType"),M=e.get("stillShowZeroSum"),D=v.getDataExtent("value");D[0]=0;var L=l,P=0,_=y,N=w?1:-1;if(v.each("value",function(e,t){var a;if(isNaN(e))v.setItemLayout(t,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:w,cx:p,cy:d,r0:f,r:A?NaN:m});else{(a="area"!==A?0===S&&M?b:e*b:l/I)<x?(a=x,L-=x):P+=e;var n=_+N*a;v.setItemLayout(t,{angle:a,startAngle:_,endAngle:n,clockwise:w,cx:p,cy:d,r0:f,r:A?r(e,D,[f,m]):m}),_=n}},!0),L<l&&I)if(L<=.001){var T=l/I;v.each("value",function(e,t){if(!isNaN(e)){var a=v.getItemLayout(t);a.angle=T,a.startAngle=y+N*t*T,a.endAngle=y+N*(t+1)*T}})}else b=L/P,_=y,v.each("value",function(e,t){if(!isNaN(e)){var a=v.getItemLayout(t),n=a.angle===x?x:e*b;a.startAngle=_,a.endAngle=_+N*n,_+=N*n}});o(e,m,h,u)})}},"Vb+l":function(e,t,a){var n=a("Icdr"),i=a("/gxq");a("/vN/"),a("1A4n");var r=a("XRkS"),o=a("ri8f"),s=a("9Z3y"),l=a("l4Op");r("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),n.registerVisual(i.curry(o,"pie")),n.registerLayout(i.curry(s,"pie")),n.registerProcessor(i.curry(l,"pie"))},XRkS:function(e,t,a){var n=a("Icdr"),i=a("/gxq");e.exports=function(e,t){i.each(t,function(t){t.update="updateView",n.registerAction(t,function(a,n){var i={};return n.eachComponent({mainType:"series",subType:e,query:a},function(e){e[t.method]&&e[t.method](a.name,a.dataIndex);var n=e.getData();n.each(function(t){var a=n.getName(t);i[a]=e.isSelected(a)||!1})}),{name:a.name,selected:i}})})}},XhgW:function(e,t,a){var n=a("3h1/");function i(e,t,a,n,i,r,o){function s(t,a,n,i){for(var r=t;r<a;r++)if(e[r].y+=n,r>t&&r+1<a&&e[r+1].y>e[r].y+e[r].height)return void l(r,n/2);l(a-1,n/2)}function l(t,a){for(var n=t;n>=0&&(e[n].y-=a,!(n>0&&e[n].y>e[n-1].y+e[n-1].height));n--);}function c(e,t,a,n,i,r){for(var o=t?Number.MAX_VALUE:0,s=0,l=e.length;s<l;s++)if("center"!==e[s].position){var c=Math.abs(e[s].y-n),h=e[s].len,u=e[s].len2,g=c<i+h?Math.sqrt((i+h+u)*(i+h+u)-c*c):Math.abs(e[s].x-a);t&&g>=o&&(g=o-10),!t&&g<=o&&(g=o+10),e[s].x=a+g*r,o=g}}e.sort(function(e,t){return e.y-t.y});for(var h,u=0,g=e.length,p=[],d=[],f=0;f<g;f++)(h=e[f].y-u)<0&&s(f,g,-h),u=e[f].y+e[f].height;o-u<0&&l(g-1,u-o);for(f=0;f<g;f++)e[f].y>=a?d.push(e[f]):p.push(e[f]);c(p,!1,t,a,n,i),c(d,!0,t,a,n,i)}e.exports=function(e,t,a,r){var o,s,l=e.getData(),c=[],h=!1;l.each(function(a){var i,r,u,g,p=l.getItemLayout(a),d=l.getItemModel(a),f=d.getModel("label.normal"),m=f.get("position")||d.get("label.emphasis.position"),v=d.getModel("labelLine.normal"),y=v.get("length"),x=v.get("length2"),I=(p.startAngle+p.endAngle)/2,S=Math.cos(I),b=Math.sin(I);o=p.cx,s=p.cy;var w="inside"===m||"inner"===m;if("center"===m)i=p.cx,r=p.cy,g="center";else{var A=(w?(p.r+p.r0)/2*S:p.r*S)+o,M=(w?(p.r+p.r0)/2*b:p.r*b)+s;if(i=A+3*S,r=M+3*b,!w){var D=A+S*(y+t-p.r),L=M+b*(y+t-p.r),P=D+(S<0?-1:1)*x;i=P+(S<0?-5:5),r=L,u=[[A,M],[D,L],[P,L]]}g=w?"center":S>0?"left":"right"}var _=f.getFont(),N=f.get("rotate")?S<0?-I+Math.PI:-I:0,T=e.getFormattedLabel(a,"normal")||l.getName(a),k=n.getBoundingRect(T,_,g,"top");h=!!N,p.label={x:i,y:r,position:m,height:k.height,len:y,len2:x,linePoints:u,textAlign:g,verticalAlign:"middle",rotation:N,inside:w},w||c.push(p.label)}),!h&&e.get("avoidLabelOverlap")&&function(e,t,a,n,r,o){for(var s=[],l=[],c=0;c<e.length;c++)e[c].x<t?s.push(e[c]):l.push(e[c]);for(i(l,t,a,n,1,0,o),i(s,t,a,n,-1,0,o),c=0;c<e.length;c++){var h=e[c].linePoints;if(h){var u=h[1][0]-h[2][0];e[c].x<t?h[2][0]=e[c].x+3:h[2][0]=e[c].x-3,h[1][1]=h[2][1]=e[c].y,h[1][0]=h[2][0]+u}}}(c,o,s,t,0,r)}},kQD9:function(e,t,a){var n=a("/gxq"),i={updateSelectedMap:function(e){this._targetList=e.slice(),this._selectTargetMap=n.reduce(e||[],function(e,t){return e.set(t.name,t),e},n.createHashMap())},select:function(e,t){var a=null!=t?this._targetList[t]:this._selectTargetMap.get(e);"single"===this.get("selectedMode")&&this._selectTargetMap.each(function(e){e.selected=!1}),a&&(a.selected=!0)},unSelect:function(e,t){var a=null!=t?this._targetList[t]:this._selectTargetMap.get(e);a&&(a.selected=!1)},toggleSelected:function(e,t){var a=null!=t?this._targetList[t]:this._selectTargetMap.get(e);if(null!=a)return this[a.selected?"unSelect":"select"](e,t),a.selected},isSelected:function(e,t){var a=null!=t?this._targetList[t]:this._selectTargetMap.get(e);return a&&a.selected}};e.exports=i},l4Op:function(e,t){e.exports=function(e,t){var a=t.findComponents({mainType:"legend"});a&&a.length&&t.eachSeriesByType(e,function(e){var t=e.getData();t.filterSelf(function(e){for(var n=t.getName(e),i=0;i<a.length;i++)if(!a[i].isSelected(n))return!1;return!0},this)},this)}},ri8f:function(e,t){e.exports=function(e,t){var a={};t.eachRawSeriesByType(e,function(e){var n=e.getRawData(),i={};if(!t.isSeriesFiltered(e)){var r=e.getData();r.each(function(e){var t=r.getRawIndex(e);i[t]=e}),n.each(function(t){var o=i[t],s=null!=o&&r.getItemVisual(o,"color",!0);if(s)n.setItemVisual(t,"color",s);else{var l=n.getItemModel(t).get("itemStyle.normal.color")||e.getColorFromPalette(n.getName(t),a);n.setItemVisual(t,"color",l),null!=o&&r.setItemVisual(o,"color",l)}})}})}},v9AW:function(e,t){}});
//# sourceMappingURL=3.2db6587be640e0912d7c.js.map